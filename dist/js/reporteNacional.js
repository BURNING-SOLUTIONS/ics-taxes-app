"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),IcsReporteNacional=function(){function t(e){_classCallCheck(this,t),this._elemento=e,this._container=$("table.table_servicios_nacionales > tbody")}return _createClass(t,[{key:"isLimitValRate",value:function(t){for(var e=!0,a=t.toString(),n=0;n<a.length;n++)"9"!==a.charAt(n)&&(e=!1);return e&&a.includes("999")}},{key:"drawRangeFills",value:function(){var t=""+this._elemento.elemento+this._elemento.hasta;t=t.replace(/\s/g,""),$("table.table_servicios_nacionales > tbody input#"+t)&&$("table.table_servicios_nacionales > tbody input#"+t).val(this._elemento.precio.toFixed(2)+" €")}},{key:"getKgAdicional",value:function(t){var e=t.length-1,a=t.length-2;return this.isLimitValRate(t[e].hasta)?t[e].precio.toFixed(2):(t[e].precio-t[a].precio).toFixed(2)}},{key:"drawAditionalFills",value:function(t){var e=this;Object.keys(t).forEach(function(a){var n=t[a].arraySelf.sort(function(t,e){return t.hasta>e.hasta?1:t.hasta<e.hasta?-1:0});n.length,n.length,$("table.table_servicios_nacionales > tbody input#"+a+'[refid="kg"]').val(e.getKgAdicional(n)+" €")}),this.drawTomisslFills(t)}},{key:"getLastRangeValid",value:function(t,e){var a=t[0];return t.forEach(function(t,n){t.precio&&t.hasta<e&&e-parseInt(t.hasta)<e-parseInt(a.hasta)&&(a=t)}),a}},{key:"calculatePriceExistenInRateRange",value:function(t,e){var a=this,n={boolean_exist:!1,price:null},i=null;return t.forEach(function(t,r){e>=parseFloat(t.desde)&&e<=parseFloat(t.hasta)&&!a.isLimitValRate(t.hasta)&&(!i||parseFloat(t.hasta)<i)&&(i=parseFloat(t.hasta),n.boolean_exist=!0,n.price=t.precio)}),n}},{key:"calculateRangeInexistent",value:function(t,e){var a=this;if(t.attr("element")){var n=parseInt(t.attr("tramo"));Object.keys(e).forEach(function(i){if(i.toString()===t.attr("element").toString()){var r=a.calculatePriceExistenInRateRange(e[i].arraySelf,n);if(r.boolean_exist)t.val(r.price.toFixed(2)+" €");else{var l=e[i].arraySelf.sort(function(t,e){return t.hasta>e.hasta?1:t.hasta<e.hasta?-1:0}),s=a.getKgAdicional(l),o=a.getLastRangeValid(l,parseInt(t.attr("tramo"))),c=parseInt(t.attr("tramo"))-parseInt(o.hasta);t.val((c*s+o.precio).toFixed(2)+" €")}}})}}},{key:"drawTomisslFills",value:function(t){var e=this,a=$("table.table_servicios_nacionales > tbody > tr").find("td > input");$.each(a,function(a,n){"0.00 €"===$(n).val()&&e.calculateRangeInexistent($(n),t)})}},{key:"listaElementos",set:function(t){this._elemento=t}},{key:"listaElemento",get:function(){return this._elemento}},{key:"container",set:function(t){this._container=t},get:function(){return this._container}}]),t}();